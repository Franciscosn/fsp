<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Fachbegriffe</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@600;700&family=Nunito:wght@400;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="src/styles.css?v=20260217j" />
  </head>
  <body class="auth-only">
    <div class="bg-orb orb-a" aria-hidden="true"></div>
    <div class="bg-orb orb-b" aria-hidden="true"></div>
    <div class="bg-orb orb-c" aria-hidden="true"></div>

    <aside class="edge-deco left" aria-hidden="true">
      <span>üî•</span><span>‚ù§</span><span>‚õìÔ∏è</span><span>üî•</span><span>‚ù§</span
      ><span>‚õìÔ∏è</span><span>üî•</span>
    </aside>
    <aside class="edge-deco right" aria-hidden="true">
      <span>‚õìÔ∏è</span><span>‚ù§</span><span>üî•</span><span>‚õìÔ∏è</span><span>‚ù§</span
      ><span>üî•</span><span>‚õìÔ∏è</span>
    </aside>

    <section id="authPage" class="auth-page">
      <article class="auth-stage">
        <figure class="auth-portrait-wrap">
          <img
            id="authPortrait"
            class="auth-portrait"
            src="assets/hermine-heusler-edenhuizen.jpg"
            alt="Dr. Hermine Heusler-Edenhuizen"
          />
          <figcaption class="auth-caption">
            <p class="auth-caption-title">
              Dr. Hermine Heusler-Edenhuizen (1872‚Äì1955), Pionierin der Frauenmedizin in
              Deutschland.
            </p>
            <p class="auth-caption-quote">
              ‚ÄûEin Mann nach altem Stil ‚Ä¶ kann mit einer selbstbewussten, berufst√§tigen Frau nicht
              in Ruhe leben.‚Äú (gek√ºrzt, 1954)
            </p>
          </figcaption>
        </figure>

        <div class="panel auth-panel auth-card">
          <p class="auth-brand">deutschvisite.de</p>
          <h2>Willkommen zur Fachsprache</h2>
          <p class="auth-lead">
            Hier lernst du die Fachsprache, um in Deutschland arbeiten zu d√ºrfen. Danke an alle
            √ÑrztInnen f√ºr Ihre Geduld und viel Kraft bei diesem b√ºrokratischen Prozess. Animo
            amigos. Te amo Kat.
          </p>
          <p id="authStatus" class="auth-status">Nicht eingeloggt</p>
          <form id="authForm" class="auth-form auth-form-stacked">
            <input id="emailInput" class="auth-input" type="email" placeholder="E-Mail" required />
            <input
              id="passwordInput"
              class="auth-input"
              type="password"
              placeholder="Passwort"
              minlength="6"
              required
            />
            <button id="loginBtn" class="primary-btn auth-primary-btn" type="submit">Login</button>
            <button id="signupBtn" class="soft-btn auth-soft-btn" type="button">
              Registrieren
            </button>
          </form>
        </div>
      </article>
    </section>

    <main id="appContent" class="app-shell hidden">
      <section id="levelPanel" class="panel level-panel reveal" style="--i: 1">
        <div class="level-visual">
          <img id="levelAvatar" class="level-avatar" src="assets/levels/level-0.png" alt="Level Avatar" />
        </div>
        <div class="level-summary">
          <p id="topXpText" class="top-xp-text">Gesamt XP 0</p>
          <p id="xpMilestone" class="xp-milestone hidden" aria-live="polite">+10 XP</p>
          <button
            id="dailyGoalPanel"
            class="daily-goal-panel"
            type="button"
            title="Tagesziel setzen"
            aria-label="Tagesziel in XP setzen"
          >
            <span id="dailyGoalText" class="daily-goal-text">Heute 0 / 20 XP</span>
            <span class="daily-goal-track"><span id="dailyGoalFill" class="daily-goal-fill"></span></span>
            <span class="daily-goal-hint">Klicken, um Tagesziel zu aendern</span>
          </button>
        </div>
        <div class="level-copy hidden" aria-hidden="true">
          <p id="levelBadge" class="level-badge">XP 0</p>
          <h3 id="levelTitle">Trainingspunkte</h3>
          <p id="levelProgressText" class="muted">0 / 10 bis +10 XP</p>
          <div class="level-track" role="progressbar" aria-label="XP Fortschritt bis +10" aria-valuemin="0" aria-valuemax="10" aria-valuenow="0">
            <div id="levelFill" class="level-fill"></div>
          </div>
        </div>
      </section>

      <header class="panel dedication reveal" style="--i: 2">
        <div class="dedication-copy">
          <h2 class="practice-headline">some german a day keeps the doctor not away</h2>
          <button id="quickPracticeBtn" class="primary-btn practice-btn" type="button">√úben</button>
          <p class="muted">regular spaced repetition mode</p>
        </div>
      </header>

      <section id="voicePanel" class="panel voice-panel reveal" style="--i: 3">
        <div class="voice-head">
          <h3>Patiens ex machina</h3>
          <button
            id="voiceInfoBtn"
            class="voice-info-btn"
            type="button"
            aria-haspopup="dialog"
            aria-controls="voiceInfoModal"
            aria-expanded="false"
            title="Info"
          >
            i
          </button>
        </div>
        <div class="voice-text-compact">
          <button id="voiceRecordBtn" class="primary-btn voice-record-top" type="button">
            üé§ Aufnahme starten
          </button>
          <textarea
            id="voiceTextInput"
            class="voice-text-input"
            rows="2"
            maxlength="500"
            placeholder="Schreibe hier deine Frage an den Patienten und klicke auf 'Text senden'."
          ></textarea>
          <button id="voiceTextSendBtn" class="soft-btn voice-send-btn" type="button">Text senden</button>
        </div>
        <article id="voiceLastTurn" class="voice-turn hidden">
          <p class="voice-turn-label">Du:</p>
          <p id="voiceUserTranscript" class="voice-turn-text"></p>
          <p id="voiceAssistantLabel" class="voice-turn-label">Patient:</p>
          <p id="voiceAssistantReply" class="voice-turn-text"></p>
          <p id="voiceCoachHint" class="voice-coach-hint hidden"></p>
        </article>
        <div class="voice-actions">
          <button id="voiceNextCaseBtn" class="soft-btn" type="button">Naechster Fall</button>
          <button id="voicePatientConversationBtn" class="soft-btn voice-patient-conversation-btn" type="button">
            Arzt-Patient Gespr√§ch
          </button>
          <button id="voiceDiagnoseBtn" class="soft-btn voice-diagnose-btn" type="button">
            Diagnostizieren
          </button>
          <button id="voiceDoctorConversationBtn" class="soft-btn voice-doctor-conversation-btn" type="button">
            Arzt-Arzt Gespr√§ch
          </button>
          <button
            id="voiceDoctorConversationEvalBtn"
            class="soft-btn voice-doctor-conversation-eval-btn hidden"
            type="button"
          >
            Arzt-Arzt bewerten
          </button>
          <button id="voiceDoctorLetterToggleBtn" class="soft-btn" type="button">
            Arztbrief erstellen
          </button>
          <button
            id="voicePromptConfigToggleBtn"
            class="soft-btn voice-prompt-config-toggle-btn"
            type="button"
            aria-expanded="false"
          >
            Prompt-Editor
          </button>
        </div>
        <article id="voiceDoctorLetterPanel" class="voice-doctor-letter hidden">
          <h4>Arztbrief</h4>
          <textarea
            id="voiceDoctorLetterInput"
            class="voice-doctor-letter-input"
            rows="18"
            placeholder="Ergaenze hier den Arztbrief und sende ihn anschliessend zur Bewertung."
          ></textarea>
          <button id="voiceDoctorLetterSubmitBtn" class="soft-btn voice-doctor-letter-submit" type="button">
            Arztbrief abschicken
          </button>
        </article>
        <article id="voicePromptConfigPanel" class="voice-prompt-config hidden">
          <h4>Prompt-Editor (Testphase)</h4>
          <p class="voice-prompt-config-hint">
            Hier kannst du die kompletten Systemprompts bearbeiten. Aenderungen gelten lokal auf diesem Geraet.
          </p>
          <div class="voice-prompt-config-grid">
            <label class="voice-prompt-config-item" for="voicePromptVoiceTurnInput">
              <span>Arzt-Patient-Gespraech (Patientensimulation)</span>
              <textarea
                id="voicePromptVoiceTurnInput"
                class="voice-prompt-config-input"
                rows="8"
                maxlength="60000"
              ></textarea>
            </label>
            <label class="voice-prompt-config-item" for="voicePromptVoiceEvaluateInput">
              <span>Simulationsanamnese-Bewertung</span>
              <textarea
                id="voicePromptVoiceEvaluateInput"
                class="voice-prompt-config-input"
                rows="8"
                maxlength="60000"
              ></textarea>
            </label>
            <label class="voice-prompt-config-item" for="voicePromptDoctorLetterEvaluateInput">
              <span>Arztbrief-Bewertung</span>
              <textarea
                id="voicePromptDoctorLetterEvaluateInput"
                class="voice-prompt-config-input"
                rows="8"
                maxlength="60000"
              ></textarea>
            </label>
            <label class="voice-prompt-config-item" for="voicePromptVoiceDoctorTurnInput">
              <span>Arzt-Arzt-Gespraech (Prueferrolle)</span>
              <textarea
                id="voicePromptVoiceDoctorTurnInput"
                class="voice-prompt-config-input"
                rows="8"
                maxlength="60000"
              ></textarea>
            </label>
            <label class="voice-prompt-config-item" for="voicePromptVoiceDoctorEvaluateInput">
              <span>Arzt-Arzt-Bewertung</span>
              <textarea
                id="voicePromptVoiceDoctorEvaluateInput"
                class="voice-prompt-config-input"
                rows="8"
                maxlength="60000"
              ></textarea>
            </label>
          </div>
          <div class="voice-prompt-config-actions">
            <button id="voicePromptConfigSaveBtn" class="soft-btn" type="button">
              Prompt-Aenderungen speichern
            </button>
            <button id="voicePromptConfigResetBtn" class="soft-btn" type="button">
              Alle Prompts auf Standard zuruecksetzen
            </button>
          </div>
          <section class="voice-prompt-feedback">
            <h5>Prompt-Vorschlag an die Website</h5>
            <label class="voice-prompt-feedback-item" for="voicePromptProposalNameInput">
              <span>Name des Prompt-Vorschlags</span>
              <input
                id="voicePromptProposalNameInput"
                class="voice-prompt-feedback-input"
                type="text"
                maxlength="120"
                placeholder="z. B. Arzt-Arzt v3 (fokussierte Rueckfragen)"
              />
            </label>
            <label class="voice-prompt-feedback-item" for="voicePromptProposalNoteInput">
              <span>Bemerkung</span>
              <textarea
                id="voicePromptProposalNoteInput"
                class="voice-prompt-feedback-textarea"
                rows="3"
                maxlength="1200"
                placeholder="Kurze Notiz: Was war besser/schlechter?"
              ></textarea>
            </label>
            <label class="voice-prompt-feedback-item" for="voicePromptProposalTargetSelect">
              <span>Welchen Prompt als Vorschlag senden?</span>
              <select id="voicePromptProposalTargetSelect" class="voice-prompt-feedback-select">
                <option value="voiceDoctorTurn">Arzt-Arzt-Gespraech (Prueferrolle)</option>
                <option value="voiceDoctorEvaluate">Arzt-Arzt-Bewertung</option>
                <option value="voiceTurn">Arzt-Patient-Gespraech (Patientensimulation)</option>
                <option value="voiceEvaluate">Simulationsanamnese-Bewertung</option>
                <option value="doctorLetterEvaluate">Arztbrief-Bewertung</option>
                <option value="__all__">Alle 5 Prompts (aktueller Stand)</option>
              </select>
            </label>
            <label class="voice-prompt-feedback-check">
              <input id="voicePromptProposalApplyNowInput" type="checkbox" />
              Direkt global uebernehmen (Testphase)
            </label>
            <button id="voicePromptProposalSubmitBtn" class="soft-btn" type="button">
              Vorschlag senden
            </button>
            <p id="voicePromptProposalStatus" class="voice-prompt-feedback-status"></p>
          </section>
        </article>
        <p id="voiceStatus" class="voice-status">Bereit. Du kannst direkt sprechen oder Text senden.</p>
        <audio id="voiceReplyAudio" class="voice-reply-audio hidden" controls></audio>
        <div class="voice-config-row">
          <select id="voiceCaseSelect" class="voice-case-select" aria-label="Fallauswahl">
            <option value="default">1</option>
          </select>
          <select id="voiceModelSelect" class="voice-case-select" aria-label="Sprachmodell">
            <option value="@cf/openai/gpt-oss-20b">gpt-oss-20b (empfohlen)</option>
            <option value="@cf/qwen/qwen3-30b-a3b-fp8">qwen3-30b-a3b-fp8 (guenstig)</option>
            <option value="@cf/zai-org/glm-4.7-flash">glm-4.7-flash (schnell)</option>
            <option value="@cf/openai/gpt-oss-120b">gpt-oss-120b (staerker, teurer)</option>
          </select>
        </div>
        <p id="voiceCaseMeta" class="voice-case-meta">Aktiv: Fall 1</p>
        <div class="voice-case-actions">
          <details class="voice-resolution voice-resolution-inline">
            <summary class="voice-resolution-toggle">Fall aufloesen</summary>
            <div class="voice-resolution-content">
              <h4 id="voiceResolutionTitle">Fall aufloesen</h4>
              <p id="voiceResolutionHint" class="voice-resolution-hint">Aufloesung wird geladen ...</p>
              <p id="voiceResolutionSummary" class="voice-resolution-summary"></p>
              <div class="voice-resolution-grid">
                <article class="voice-resolution-block">
                  <h5>Wichtige Arztfragen</h5>
                  <ul id="voiceResolutionQuestions" class="voice-resolution-list"></ul>
                </article>
                <article class="voice-resolution-block">
                  <h5>Relevante Fachbegriffe</h5>
                  <ul id="voiceResolutionTerms" class="voice-resolution-list"></ul>
                </article>
              </div>
              <article class="voice-resolution-block">
                <h5>Diagnose / moegliche Diagnosen</h5>
                <ul id="voiceResolutionDiagnoses" class="voice-resolution-list"></ul>
              </article>
            </div>
          </details>
          <button
            id="voiceCaseInfoToggleBtn"
            class="soft-btn voice-case-info-toggle-btn"
            type="button"
            aria-expanded="false"
          >
            Komplette Fallinformationen
          </button>
          <button id="voiceCreateCaseBtn" class="soft-btn voice-create-case-btn" type="button">
            Neuen Fall kreieren
          </button>
        </div>
        <article id="voiceCaseInfoPanel" class="voice-case-info hidden">
          <h4>Komplette Fallinformationen</h4>
          <pre id="voiceCaseInfoText" class="voice-case-info-text"></pre>
        </article>
        <label class="voice-label hidden" for="voiceCaseInput">Eigener Falltext (intern)</label>
        <textarea
          id="voiceCaseInput"
          class="voice-case-input hidden"
          rows="3"
          placeholder="Interner Speicher fuer eigenen Fall."
        ></textarea>
        <article id="voiceEvalPanel" class="voice-eval hidden">
          <div class="voice-eval-head">
            <h4>Simulationsanamnese-Bewertung</h4>
            <p id="voiceEvalDiagnosis" class="voice-eval-diagnosis"></p>
          </div>
          <div class="voice-eval-score-grid">
            <p><span>Gesamt (max. 17,5)</span><strong id="voiceEvalOverall">0</strong></p>
            <p><span>Gespr√§chsteil (max. 15)</span><strong id="voiceEvalAnamnesis">0</strong></p>
            <p><span>Diagnose/Vorgehen (max. 2,5)</span><strong id="voiceEvalDiagnosisScore">0</strong></p>
          </div>
          <p id="voiceEvalLikely" class="voice-eval-likely"></p>
          <p id="voiceEvalSummary" class="voice-eval-summary"></p>
          <div class="voice-eval-grid">
            <article class="voice-eval-block">
              <h5>Einzelkriterien (7)</h5>
              <p id="voiceEvalQuestionReview" class="voice-eval-prose"></p>
            </article>
          </div>
          <div class="voice-eval-grid">
            <article class="voice-eval-block">
              <h5>Bestehensniveau</h5>
              <p id="voiceEvalDiagnosisReview" class="voice-eval-prose"></p>
            </article>
            <article class="voice-eval-block">
              <h5>Empfehlung zur Nachbesserung</h5>
              <p id="voiceEvalTeacherFeedback" class="voice-eval-prose"></p>
            </article>
          </div>
        </article>
        <article id="voiceDoctorLetterEvalPanel" class="voice-eval hidden">
          <div class="voice-eval-head">
            <h4>Arztbrief-Bewertung</h4>
            <p id="voiceDoctorLetterEvalScore" class="voice-eval-diagnosis"></p>
          </div>
          <p id="voiceDoctorLetterEvalPass" class="voice-eval-likely"></p>
          <p id="voiceDoctorLetterEvalRecommendation" class="voice-eval-summary"></p>
          <article class="voice-eval-block">
            <h5>Einzelkriterien</h5>
            <div id="voiceDoctorLetterEvalCriteria" class="voice-eval-prose"></div>
          </article>
        </article>
        <article id="voiceDoctorConversationEvalPanel" class="voice-eval hidden">
          <div class="voice-eval-head">
            <h4>Arzt-Arzt-Gespr√§ch-Bewertung</h4>
            <p id="voiceDoctorConversationEvalScore" class="voice-eval-diagnosis"></p>
          </div>
          <p id="voiceDoctorConversationEvalPass" class="voice-eval-likely"></p>
          <p id="voiceDoctorConversationEvalSummary" class="voice-eval-summary"></p>
          <p id="voiceDoctorConversationEvalRecommendation" class="voice-eval-summary"></p>
          <article class="voice-eval-block">
            <h5>Einzelkriterien (8)</h5>
            <div id="voiceDoctorConversationEvalCriteria" class="voice-eval-prose"></div>
          </article>
        </article>
        <div id="voiceInfoModal" class="voice-info-modal hidden" role="dialog" aria-modal="true" aria-labelledby="voiceInfoTitle">
          <button
            id="voiceInfoBackdrop"
            class="voice-info-backdrop"
            type="button"
            aria-label="Info schliessen"
          ></button>
          <div class="voice-info-card">
            <h4 id="voiceInfoTitle">Info</h4>
            <p>Fallbasiertes Gespraech fuer medizinische Pruefungssimulation.</p>
            <button id="voiceInfoCloseBtn" class="soft-btn" type="button">Schliessen</button>
          </div>
        </div>
      </section>

      <section id="selectionPanel" class="panel selection-panel reveal" style="--i: 4">
        <div class="control-grid">
          <article class="selection-card">
            <h3>Kategorien</h3>
            <p class="muted">
             
            </p>
            <div id="categoryFilters" class="chip-row"></div>
          </article>

          <article class="selection-card">
            <h3>Wiederholung</h3>
            <p class="muted">
              
            </p>
            <div id="folderFilters" class="folder-grid"></div>
          </article>
        </div>
        <div class="selection-footer">
          <p id="queueInfo" class="queue-info"></p>
        </div>
      </section>

      <section id="quizPanel" class="panel reveal quiz-panel hidden" style="--i: 5">
        <div id="sessionXpStrip" class="session-xp-strip" role="progressbar" aria-label="Session XP" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
          <div class="session-xp-track">
            <div id="sessionXpFill" class="session-xp-fill"></div>
          </div>
          <p id="sessionXpText" class="session-xp-text">Session XP: 0</p>
        </div>
        <div class="quiz-top">
          <div>
            <h2>Fokusmodus</h2>
            <p id="progressText" class="muted">Karte 0 von 0</p>
          </div>
          <div class="quiz-actions">
            <button id="shuffleBtn" class="soft-btn" type="button">
              Neu mischen
            </button>
            <button id="exitImmersiveBtn" class="soft-btn" type="button">
              Deck Auswahl
            </button>
          </div>
        </div>

        <div id="emptyState" class="empty-state">
          <p>Keine Karte in diesem Ordner. Probiere eine andere Auswahl.</p>
        </div>

        <article id="cardBox" class="quiz-card hidden">
          <div class="card-meta">
            <span id="cardMode" class="pill">Modus</span>
            <span id="cardCategory" class="pill ghost">Kategorie</span>
          </div>

          <p id="questionText" class="question"></p>
          <div id="choices" class="choices"></div>

          <section id="feedbackBox" class="feedback hidden">
            <p id="resultText" class="result-line"></p>
            <p id="explanationText" class="explanation"></p>
            <p id="translationText" class="translation-inline"></p>
            <button id="nextBtn" class="primary-btn" type="button">
              N√§chste Karte
            </button>
          </section>
        </article>
      </section>

      <footer class="panel feedback-panel reveal" style="--i: 6">
        <div class="footer-actions">
          <a
            class="soft-btn feedback-link"
            href="mailto:Kuss@crelur.com?subject=R%C3%BCckmeldung&body=Hallo%20Francisco%2C%0A%0Ahier%20ist%20meine%20R%C3%BCckmeldung%20zur%20Webseite%3A%0A"
          >
            Francisco R√ºckmeldung geben
          </a>
          <button id="logoutBtn" class="soft-btn logout-btn" type="button">Logout</button>
        </div>
        <p id="sessionText" class="session-user">Eingeloggt</p>
      </footer>
    </main>

    <p id="buildBadge" class="build-badge" aria-live="polite">
      Stand wird geladen ...
    </p>

    <button
      id="toggleStatsBtn"
      class="stats-fab hidden"
      type="button"
      title="Statistik"
      aria-label="Statistik"
    >
      üìä
    </button>

    <section id="statsOverlay" class="stats-overlay hidden" aria-hidden="true">
      <div id="statsBackdrop" class="stats-backdrop"></div>
      <article class="stats-sheet">
        <div class="stats-head">
          <h2>Statistik</h2>
          <button id="closeStatsBtn" class="soft-btn" type="button">
            Schliessen
          </button>
        </div>

        <div class="stats-grid">
          <article class="panel">
            <h3>Heute</h3>
            <div class="today-stats">
              <p><span>Geuebt:</span> <strong id="todayAttempts">0</strong></p>
              <p><span>Richtig:</span> <strong id="todayCorrect">0</strong></p>
              <p><span>Falsch:</span> <strong id="todayWrong">0</strong></p>
              <p><span>Trefferquote:</span> <strong id="todayRate">0%</strong></p>
              <p><span>Tagesziel:</span> <strong id="kpiGoal">0 / 20</strong></p>
              <p><span>Serie:</span> <strong id="kpiStreak">0 Tage</strong></p>
            </div>
          </article>

          <article class="panel">
            <h3>7-Tage Verlauf</h3>
            <p class="muted">
              Taegliche Uebungen mit Erfolgsquote. Hoehere Balken bedeuten mehr
              trainierte Karten.
            </p>
            <p class="muted compact">
              Heute Erfolg: <strong id="kpiAccuracy">0%</strong>
            </p>
            <div id="weekChart" class="chart"></div>
          </article>
        </div>
      </article>
    </section>

    <script type="module" src="src/app.js?v=20260217j"></script>
  </body>
</html>
